<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>YM Future Radio - Clean Stream</title>
    <style>
        :root {
            --neon-blue: #00f2ff;
            --deep-blue: #001a1d;
            --glass-bg: rgba(0, 30, 40, 0.75);
        }

        body {
            background-color: #050505;
            /* 未來感背景網格 */
            background-image: 
                radial-gradient(circle at 50% 50%, #002b36 0%, #000 100%),
                linear-gradient(rgba(0, 242, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 242, 255, 0.05) 1px, transparent 1px);
            background-size: 100% 100%, 30px 30px, 30px 30px;
            color: var(--neon-blue);
            font-family: 'Orbitron', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        #radio-container {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--neon-blue);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(0, 242, 255, 0.2);
            text-align: center;
            width: 400px;
        }

        #display {
            font-size: 5rem;
            font-weight: 900;
            margin: 20px 0;
            text-shadow: 0 0 15px var(--neon-blue);
        }

        .status-text {
            font-size: 0.7rem;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: rgba(0, 242, 255, 0.6);
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        button {
            background: transparent;
            color: var(--neon-blue);
            border: 1px solid var(--neon-blue);
            padding: 12px 5px;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.75rem;
            transition: 0.3s;
        }

        button:hover {
            background: var(--neon-blue);
            color: #000;
            box-shadow: 0 0 15px var(--neon-blue);
        }

        .btn-full { grid-column: span 3; margin-top: 5px; }

        #player-container { display: none; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
</head>
<body>

<div id="radio-container">
    <div class="status-text" id="status">Neural Link Standby</div>
    <div id="display">YM 91.1</div>

    <div class="controls">
        <button onclick="changeFreq(-0.1)">TUNE -</button>
        <button onclick="togglePlay()" id="playBtn">CONNECT</button>
        <button onclick="changeFreq(0.1)">TUNE +</button>
        
        <button onclick="autoScan()" class="btn-full">AUTO SCAN</button>
        <button onclick="snapToNearest()" class="btn-full">SNAP TO NEAREST</button>
    </div>
</div>

<div id="player-container">
    <div id="main-player"></div>
    <div id="noise-player"></div>
</div>

<script>
    // --- 自訂電台清單 ---
    const STATIONS = {
        "91.3": "q8hw5oKCDp4", 
        "95.2": "T3LXcjcR3bk",
        "97.4": "vr3XyVCR4T0",
        "98.5": "28KRPhVzCus",
        "99.9": "dVkQNH3IfME",
        "102.5": "3Fz1njXrIKM",
        "103.1": "4FBW3mkdKOs",
        "105.0": "OcwqWNR-1FI",
        "105.3": "tr77RbnfYIU",
        "105.9": "RgMmmgkbh90",
        "106.2": "R62E7cFWX6o"
    };
    const STATIC_ID = "Po03fb0RbYY"; // 雜訊音源

    let currentFreq = parseFloat(localStorage.getItem('lastFreq')) || 91.1;
    let mainPlayer, noisePlayer, isPowerOn = false;

    function onYouTubeIframeAPIReady() {
        // 主播放器：使用 youtube-nocookie 域名來強化隱私並減少廣告追蹤
        mainPlayer = new YT.Player('main-player', {
            height: '0', width: '0',
            host: 'https://www.youtube-nocookie.com', 
            playerVars: {
                'autoplay': 0,
                'controls': 0,
                'rel': 0,
                'modestbranding': 1,
                'iv_load_policy': 3 // 不顯示影片註解
            },
            events: { 'onReady': () => { updateUI(); } }
        });

        noisePlayer = new YT.Player('noise-player', {
            height: '0', width: '0',
            host: 'https://www.youtube-nocookie.com',
            playerVars: { 'loop': 1, 'playlist': STATIC_ID }
        });
    }

    // 載入 API 腳本
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);

    function updateUI() {
        const fStr = currentFreq.toFixed(1);
        document.getElementById('display').innerText = `YM ${fStr}`;
        localStorage.setItem('lastFreq', fStr);

        if (!isPowerOn) {
            document.getElementById('status').innerText = "System Offline";
            return;
        }

        if (STATIONS[fStr]) {
            document.getElementById('status').innerText = "Signal Locked";
            mainPlayer.loadVideoById(STATIONS[fStr]);
            noisePlayer.pauseVideo();
        } else {
            document.getElementById('status').innerText = "Static Interference";
            mainPlayer.stopVideo();
            noisePlayer.playVideo();
        }
    }

    function changeFreq(delta) {
        currentFreq = parseFloat((currentFreq + delta).toFixed(1));
        if (currentFreq < 88.0) currentFreq = 108.0;
        if (currentFreq > 108.0) currentFreq = 88.0;
        updateUI();
    }

    function togglePlay() {
        isPowerOn = !isPowerOn;
        const btn = document.getElementById('playBtn');
        if (isPowerOn) {
            btn.innerText = "DISCONNECT";
            btn.style.background = "var(--neon-blue)";
            btn.style.color = "#000";
            updateUI();
        } else {
            btn.innerText = "CONNECT";
            btn.style.background = "transparent";
            btn.style.color = "var(--neon-blue)";
            mainPlayer.stopVideo();
            noisePlayer.stopVideo();
        }
    }

    function autoScan() {
        if (!isPowerOn) togglePlay();
        let scan = setInterval(() => {
            changeFreq(0.1);
            if (STATIONS[currentFreq.toFixed(1)]) clearInterval(scan);
        }, 150);
    }

    function snapToNearest() {
        const freqs = Object.keys(STATIONS).map(Number);
        if (freqs.length === 0) return;
        currentFreq = freqs.reduce((prev, curr) => 
            Math.abs(curr - currentFreq) < Math.abs(prev - currentFreq) ? curr : prev
        );
        if (!isPowerOn) togglePlay();
        updateUI();
    }
</script>
</body>
</html>
